<%- include('../partials/user/header') %>

<section class="bg-light p-4">
  <div class="container mb-4">
    <h2 class="mb-4">Edit Address</h2>
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8">
        <a href="/profile" class="btn btn-primary">Back to Profile</a>
        <div style="margin-top: 10px; text-align: center; font-family: 'Poppins',sans-serif;">
          <% if(typeof error !== "undefined"){ %>
            <span style="color:#f00; font-weight: bold;"><%= error %></span>
          <% } %>
        </div>

        <form style="margin-top: 15px;" action="/edit-address" method="post" id="editAddressForm">
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="name" placeholder="Your Name" name="name" value="<%= editAddress.name %>" required>
          </div>
          <div class="mb-3">
            <label for="phoneNumber" class="form-label">Phone Number</label>
            <input type="tel" class="form-control" id="phoneNumber" placeholder="Phone Number" name="phone" value="<%= editAddress.phone %>" inputmode="numeric" pattern="[0-9]*" oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
            <small id="phoneNumberError" class="form-text text-danger"></small>
          </div>
          <div class="mb-3">
            <label for="country" class="form-label">Country</label>
            <input type="text" class="form-control" id="country" placeholder="Country" name="country" value="<%= editAddress.country %>" required>
          </div>
          <div class="mb-3">
            <label for="state" class="form-label">State</label>
            <input type="text" class="form-control" id="state" placeholder="State" name="state" value="<%= editAddress.state %>" required>
          </div>
          <div class="mb-3">
            <label for="district" class="form-label">District</label>
            <input type="text" class="form-control" id="district" placeholder="District" name="district" value="<%= editAddress.district %>" required>
          </div>
          <div class="mb-3">
            <label for="city" class="form-label">City</label>
            <input type="text" class="form-control" id="city" placeholder="City" name="city" value="<%= editAddress.city %>" required>
          </div>
          <div class="mb-3">
            <label for="pincode" class="form-label">Pincode</label>
            <input type="text" class="form-control" id="pincode" placeholder="Pincode" name="pincode" value="<%= editAddress.pincode %>" inputmode="numeric" pattern="[0-9]*" oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
          </div>
          <div class="mb-3">
            <label for="streetAddress" class="form-label">Address</label>
            <input type="text" class="form-control" id="streetAddress" placeholder="Your Address" name="address" value="<%= editAddress.address %>" required>
          </div>

          <input type="hidden" name="id" value="<%= editAddress._id %>">

          <div class="d-grid">
            <button type="submit" class="btn btn-success">Edit Address</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<%- include('../partials/user/footer') %>

<!-- Back to top -->
<div class="btn-back-to-top" id="myBtn">
  <span class="symbol-btn-back-to-top">
    <i class="zmdi zmdi-chevron-up"></i>
  </span>
</div>

<!--===============================================================================================-->
<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/bootstrap/js/popper.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/select2/select2.min.js"></script>
<script>
  $(".js-select2").each(function() {
    $(this).select2({
      minimumResultsForSearch: 20,
      dropdownParent: $(this).next('.dropDownSelect2')
    });
  })
</script>
<!--===============================================================================================-->
<script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
<script>
  $('.js-pscroll').each(function() {
    $(this).css('position', 'relative');
    $(this).css('overflow', 'hidden');
    var ps = new PerfectScrollbar(this, {
      wheelSpeed: 1,
      scrollingThreshold: 1000,
      wheelPropagation: false,
    });

    $(window).on('resize', function() {
      ps.update();
    })
  });
</script>
<!--===============================================================================================-->
<script>
    // Function to validate the phone number
    function validatePhoneNumber() {
      var phoneNumberInput = document.getElementById('phoneNumber');
      var phoneNumber = phoneNumberInput.value.replace(/[^0-9]/g, ''); // Remove non-numeric characters
      var phoneNumberError = document.getElementById('phoneNumberError');
  
      if (phoneNumber.length !== 10 || isNaN(phoneNumber)) {
        phoneNumberError.innerHTML = 'Please enter a valid 10-digit phone number.';
        phoneNumberInput.classList.add('is-invalid');
        return false;
      } else {
        phoneNumberError.innerHTML = ''; // Clear the error message
        phoneNumberInput.classList.remove('is-invalid');
      }
  
      return true;
    }
  
    // Attach the validation function to the form's onsubmit event
    document.getElementById('editAddressForm').onsubmit = function () {
      return validatePhoneNumber();
    };
  </script>
<!--===============================================================================================-->
<script src="js/main.js"></script>

</body>

</html>
